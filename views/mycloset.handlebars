
<div class="navbar-fixed">
	<nav>
		<div class="nav-wrapper white darken-4">
			<div class="container">
				<div class="row">
					<div class="col s12 l10 offset-l1">
						<a href="/" class="brand-logo"><img src="assets/img/hanger-logo.png" class="logo-img"></a>
						<a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons black-text">menu</i></a>
						<ul class="right hide-on-med-and-down">
							<li><a href="#" class="black-text">Sass</a></li>
							<li><a href="#" class="black-text">Components</a></li>
							<li><a href="#" class="black-text">Javascript</a></li>
							<li><a href="#" class="black-text">Mobile</a></li>
						</ul>
						<ul class="side-nav" id="mobile-demo">
							<li><a href="#">Sass</a></li>
							<li><a href="#">Components</a></li>
							<li><a href="#">Javascript</a></li>
							<li><a href="#">Mobile</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</nav>
</div>

<div class="container">
	
	<div class="row no-bottom-margin">
		<div class="col s12 l10 offset-l1">
			<div class="row margin-top">
				{{#each user}}
				<div class="col s4 offset-s1 m3 offset-m2 l2 offset-l2">
					<div>
						<img src="{{img_url}}" alt="" class="circle responsive-img avatar-border">
					</div>
				</div>
				<div class="col s6 m5">
					<div class="row">
						<div class="col s12">
							<h5 class="black-text"><strong>{{name}}</strong></h5>
						</div>
						<div class="col s12">
							<span class="blue-grey-text">{{description}}</span>
						</div>
						<div class="col s12 smol-top-margin">
							<div class="col s12 no-padding">
								<span><strong class="black-text">{{longness}}</strong> Items&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span><strong class="black-text">27%</strong> Robability&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span><strong class="black-text">563</strong> Ratings</span>
							</div>
						</div>
					</div>
				</div>
				{{/each}}
			</div>
		</div>
	</div>
		
	<div class="row">
		<div class="col s12 l10 offset-l1">
			{{#each items}}
			<a class="modal-trigger" href="#modal{{id}}">
				<div class="col s4 closet-img-padding square-div closet-counter category{{categoryId}}">
					<img src="{{img_url}}" alt="" class="square animated fadeIn responsive-img">
					<a class="btn-floating btn-small waves-effect waves-light blue img-update-button" dataId="{{id}}"><i class="material-icons">update</i></a>
					<a class="btn-floating btn-small waves-effect waves-light blue img-delete-button" dataId="{{id}}"><i class="material-icons">delete_forever</i></a>
				</div>
			</a>
			{{/each}}
		</div>
	</div>

	{{#each items}}
	<div id="modal{{id}}" class="modal no-line-height">
			<img src="{{img_url}}" alt="" class="modal-image">
			<span class="modal-content-mycloset">
				<h4>{{name}}</h4>
				<p>{{description}}</p>
				<p>{{tags}}</p>
				<p>{{categoryId}}</p>
			</span>
	</div>
	{{/each}}

	<div class="fixed-action-btn">
		<a class="btn-floating btn-large waves-effect waves-light">
			<i class="large material-icons blue-grey darken-4">edit</i>
		</a>
		<ul>
			<li><a class="btn-floating green waves-effect waves-light"><i class="material-icons">person_add</i></a></li>
			<li><a href="#modalAdd" class="modal-trigger btn-floating green waves-effect waves-dark"><i class="material-icons">add</i></a></li>
		</ul>
	</div>

<div id="modalAdd" class="modal">
	<div class="modal-content">
		<div class="row">
			<form class="col s12">
				<div class="row">
					<div class="input-field col s12 no-bottom-margin">
						<input disabled id="userId" type="text" value="{{#each user}}{{id}}{{/each}}">
						<label for="userId">User Id</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12 no-bottom-margin">
						<input id="itemName" type="text">
						<label for="username">Item Name</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s6 no-bottom-margin">
						<select id="categoryId">
							{{#each categories}}
								<option value="{{id}}">{{name}}</option>
							{{/each}}
						</select>
						<label>Select A Category!</label>
					</div>
					<div class="input-field col s6 no-bottom-margin">
						<input id="subcategory" type="text">
						<label for="subcategory">Subcategory (optional)</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12 no-bottom-margin">
						<textarea id="description" class="materialize-textarea"></textarea>
						<label for="description">Description</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12 no-bottom-margin">
						<input id="img_url" type="text">
						<label for="img_url">Image URL</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12 no-bottom-margin">
						<input id="tags" type="text">
						<label for="tags">Tags</label>
					</div>
				</div>
			</form>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn red" id="newItem">Create New Item</button>
	</div>
</div>

</div>

<script type="text/javascript">
$(document).ready(function(){
	$('.modal').modal();
 	$('.slider').slider();
 	$('select').material_select();
 	$(".button-collapse").sideNav();

    var cw = $('.square-div').width();
	$('.square').css({'height':cw+'px'});
	$('.square').css({'width':cw+'px'});
	$('.square-div').css({'height':cw+'px'});
});

$(window).resize(function(){
	console.log('resized');
	var cw = $('.square-div').width();
	$('.square').css({'height':cw+'px'});
	$('.square').css({'width':cw+'px'});
	$('.square-div').css({'height':cw+'px'});
})

$('#modalAddOpen').click(function(){
	console.log('modal add')
	$('#modalAdd').modal('open');
})

$('.square-div').hover(function(){
	console.log('hovered');
	$(this).children(".img-delete-button").css("opacity",".7");
	$(this).children(".img-update-button").css("opacity",".7");
	$(this).children(".modal-trigger").children(".square").css("webkitFilter","brightness(50%)");
});

$('.square-div').mouseleave(function(){
	console.log('hovered');
	$(this).children(".img-delete-button").css("opacity","0");
	$(this).children(".img-update-button").css("opacity","0");
		$(this).children(".modal-trigger").children(".square").css("webkitFilter","brightness(100%)");
});

$(".img-delete-button").hover(function(){
	$(this).css("opacity","1");
})

$(".img-delete-button").mouseleave(function(){
	$(this).css("opacity",".7");
})

$(".img-update-button").hover(function(){
	$(this).css("opacity","1");
})

$(".img-update-button").mouseleave(function(){
	$(this).css("opacity",".7");
})

$('#newItem').on('click', function(){
	event.preventDefault();
	var data = {};
	data.userId = $('#userId').val().trim();
	data.name = $('#itemName').val().trim();
	data.categoryId = $('#categoryId').val();
	data.subcategory = $('#subcategory').val().trim();
	data.description = $('#description').val().trim();
	data.img_url = $('#img_url').val().trim();
	data.tags = $('#tags').val().trim();
	console.log(data);

	$.ajax({
		url: "/api/item/new",
		type: 'POST',
		data: data
	}, data).then((response)=>{
		console.log(response);
	})
})

</script>